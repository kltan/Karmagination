/*
 * $hort 0.1
 * http://github.com/kltan/short/tree/master
 * JS library development simplified 
 * Released under the MIT, BSD, and GPL Licenses.
 * Copyright 2009 Kean L. Tan 
 * Start date: 2009-04-01
 * Last build: 2009-04-09 03:12:25 PM
 */
(function(){var g=this,h=this.document,e=Array.prototype.push,i=Array.prototype.slice,f=Object.prototype.toString,a;var c=this.$,b=this.$hort;var d=g.$=this.$hort=function(k,j){return new d.prototype.init(k,j)};d.prototype={init:function(n,m){n=n||h;m=m||h;this.$hortStack=[];var j=[];if(n.nodeType||n===g){this[0]=n;this.length=1;this.query=n;return}else{if(typeof n==="string"&&n.length>0){if(/^<(.|\s)+>$/.test(n)){var l=h.createElement("DIV");l.innerHTML=$hort.cleanHTML(n);for(var k=0;k<l.childNodes.length;k++){j[k]=l.childNodes[k]}}else{j=d.selector(n,m);this.query=n}}else{if(typeof n==="function"){d.ready_queue(function(){n.call(g,d)})}else{j=n;if(n.query){this.query=n.query}}}}try{this.length=0;if(f.call(j)!="[object Array]"){j=i.call(j)}if(j.length){e.apply(this,j)}}catch(p){d.error([p])}}};d.fn=d.prototype.init.prototype;d.extend=function(l){for(var k=0;k<arguments.length;k++){for(var j in arguments[k]){l[j]=arguments[k][j]}}return l};d.extend(d.fn,{populate:function(j,k){k=k||0;this.length=k;j=i.call(j);if(!j.length){return}e.apply(this,j);return this},wipe:function(k){k=k||0;for(var j=k;j<this.length;j++){delete this[j]}this.length=k;return this},stack:function(j){this.query=j.query;this.$hortStack.push(j);return this},andSelf:function(){return this.$hortStack.length?$hort(this).populate(this.$hortStack[0],this.length).stack(this):$hort(this).stack(this)},end:function(){return this.$hortStack[0]},length:0,query:null,$hort:0.1});d.extend(d,{isArray:function(j){return f.call(j)==="[object Array]"},isObject:function(j){return f.call(j)==="[object Object]"},isDate:function(j){return f.call(j)==="[object Date]"},isGenericObject:function(j){return typeof j==="object"},isFunction:function(j){return typeof j==="function"},isString:function(j){return typeof j==="string"},isNumber:function(j){return typeof j==="number"},isBoolean:function(j){return typeof j==="boolean"},isIE:!!(g.ActiveXObject&&h.all&&!g.opera),isGecko:!!!(h.getBoxObjectFor===a),isOpera:!!g.opera,isWebkit:!!(!g.opera&&!navigator.taintEnable&&h.evaluate&&h.getBoxObjectFor===a),cleanHTML:function(j){return j.replace(/^\s+|[\n\r\t]|\s+$/g,"")},noConflict:function(j){g.$=c;if(j){g.$hort=b}return d},error:function(j){if(g.console&&g.console.log){console.log(j)}},unique:function(k){var m=[];o:for(var l=0,p=k.length;l<p;l++){for(var j=l+1;j<p;j++){if(k[j]===k[l]){continue o}}m[m.length]=k[l]}return m},selector:function(j){j=j.split("#");if(j.length==2){return[h.getElementById(j[1])]}else{return h.getElementsByTagName(j[0])}},hasSelector:function(){return !!$hort.selector.filter},namespace:function(l,k){if(l){l=l.split(".");var n=k||g;for(var m=0;m<l.length;m++){var j=l[m];n=n[j]||(n[j]={});if(m===l.length-1){return !!(d.isGenericObject(n)||d.isFunction(n))}}}return false},rgbToHex:function(m){if(m.length<3){return null}if(m.length==4&&m[3]==0&&!m){return"transparent"}var k=[];for(var j=0;j<3;j++){var l=(m[j]-0).toString(16);k.push((l.length==1)?"0"+l:l)}return"#"+k.join("")},camelCase:function(j){return j.replace(/\-(\w)/g,function(k,l){return l.toUpperCase()})},fns:[],done:false,ready_queue:function(j){if(d.isFunction(j)){d.fns.push(j)}},ready:function(){var k=function(){if(d.done){return}d.done=true;var n=[];for(var l=0;l<d.fns.length;l++){try{d.fns[l]()}catch(m){n.push(m)}}if(n.length){d.error(n)}};if(h.addEventListener){h.addEventListener("DOMContentLoaded",k,false)}if(d.isIE){if(h.body){try{h.createElement("div").doScroll("left");return k()}catch(j){}}}else{if(/loaded|complete/.test(h.readyState)){return k()}}if(!d.done){setTimeout(arguments.callee,100)}}});d.ready()})();$hort.extend($.fn,{appendTo:function(d){var c=$hort(d)[0],a=document.createDocumentFragment();if(c){for(var b=0;b<this.length;b++){a.appendChild(this[b])}c.appendChild(a)}return this},prependTo:function(e){var c=$hort(e)[0],a=document.createDocumentFragment();if(c){for(var b=0;b<this.length;b++){a.appendChild(this[b])}var d=c.firstChild;c.insertBefore(a,d)}return this},insertBefore:function(e){var c=$hort(e)[0],a=document.createDocumentFragment();if(c){for(var b=0;b<this.length;b++){a.appendChild(this[b])}var d=c.parentNode;d.insertBefore(a,c)}return this},insertAfter:function(f){var c=$hort(f)[0],a=document.createDocumentFragment();if(c){for(var b=0;b<this.length;b++){a.appendChild(this[b])}var e=c.parentNode,d=$hort(c).next()[0];e.insertBefore(a,d)}return this},empty:function(){for(var a=0;a<this.length;a++){var b=this[a].cloneNode(false);b.innerHTML="";this[a].parentNode.replaceChild(b,this[a])}return this},remove:function(c){var a=this;if($short.isString(c)){a=$hort.filter(c,this)}for(var b=0;b<a.length;b++){a[b].parentNode.removeChild(a[b])}return this},clone:function(){var d=this,a=[];for(var c=0;c<d.length;c++){if(d[c].outerHTML&&d[c]!=document.body&&d[c]!=document.documentElement&&d[c]!=document.head){var b=d[c].outerHTML;a.push($hort(b)[0])}else{a.push(d[c].cloneNode(true))}}return $hort(a).stack(this)},wrap:function(c){for(var a=0;a<this.length;a++){var b=$hort($hort.cleanHTML(c));this[a].parentNode.replaceChild(b[0],this[a]);b[0].appendChild(this[a])}return this}});$hort.extend($.fn,{pedal:function(a,f){var e=this,d=[];for(var b=0;b<e.length;b++){var c=e[b][f];while(c){if(c.nodeType==1){d.push(c);if(!a){break}}c=c[f]}}return $hort(d).stack(e)},next:function(){return this.pedal(false,"nextSibling")},nextAll:function(){return this.pedal(true,"nextSibling")},prev:function(){return this.pedal(false,"previousSibling")},prevAll:function(){return this.pedal(true,"previousSibling")},siblings:function(c){var f=this,h=[];for(var d=0;d<f.length;d++){var a=f[d],g=f[d].parentNode;for(var b=0;b<g.childNodes.length;b++){var e=g.childNodes[b];if(e.nodeType==1&&(c||e!=a)){h.push(e)}}}return $hort(h).stack(this)},parent:function(){var c=this,b=[];for(var a=0;a<c.length;a++){b.push(c[a].parentNode)}return $hort($hort.unique(b)).stack(this)},ancestors:function(){var d=this,c=[];for(var a=0;a<d.length;a++){var b=d[a].parentNode;while(b!=document){c.push(b);b=b.parentNode}}return $hort(c).stack(this)},children:function(){var d=this,c=[];for(var b=0;b<d.length;b++){for(var a=0;a<d[b].childNodes.length;a++){if(d[b].childNodes[a].nodeType==1){c.push(d[b].childNodes[a])}}}return $hort(c).stack(this)},eq:function(a){return this[a]?$hort(this[a]).stack(this):$hort([]).stack(this)},get:function(){return this.length?Array.prototype.slice.call(this):[]},add:function(a){return a?$hort(this).populate($hort(a),this.length).stack(this):$hort(this).stack(this)}});if($hort.hasSelector()){$hort.extend($.fn,{find:function(a){return this.length?$hort($hort.selector(a,this[0])).stack(this):$hort.selector(a).stack(this)},filter:function(a){return a?$hort($hort.filter(a,this)).stack(this):$hort(this).stack(this)},is:function(a){return a?!!$hort.filter(a,this).length:false},not:function(a){return a?$hort($hort.selector(":not("+a+")",this)).stack(this):$hort(this).stack(this)}})}$hort.extend($.fn,{attr:function(c,b){if($hort.isString(c)&&$hort.isString(b)){for(var a=0;a<this.length;a++){this[a].setAttribute(c,b)}return this}else{if($hort.isObject(c)){for(var a=0;a<this.length;a++){for(c in b){this[a].setAttribute(c,b[c])}}return this}}return this.length?this[0].getAttribute(b):null},removeAttr:function(b){for(var a=0;a<this.length;a++){this[a].removeAttribute(b)}return this},addClass:function(b){for(var a=0;a<this.length;a++){this[a].className+=b}return this},removeClass:function(b){for(var a=0;a<this.length;a++){this[a].className=this[a].className.replace(b,"")}return this},hasClass:function(a){return this.length?!!(this[0].className.indexOf(a)>=0):false},toggleClass:function(b){for(var a=0;a<this.length;a++){if(this[a].className.indexOf(b)>=0){this[a].className=this[a].className.replace(b,"")}else{this[a].className+=b}}return this},html:function(b){if($hort.isString(b)||$hort.isNumber(b)){for(var a=0;a<this.length;a++){this[a].innerHTML=b}return this}return this.length?this[0].innerHTML:null},text:function(c){if($hort.isString(c)||$hort.isNumber(c)){for(var a=0;a<this.length;a++){if(this[a].innerText){this[a].innerText=c}else{this[a].textContent=c}}return this}var b=[];for(var a=0;a<this.length;a++){b.push(this[a].innerText||this[a].textContent)}return b.join(" ")},val:function(b){if($hort.isString(b)||$hort.isNumber(b)){for(var a=0;a<this.length;a++){this[a].value=b}return this}return this.length?this[0].value:null}});$hort.extend($hort,{ajax:function(b){b=$hort.extend({type:"GET",data:"",url:"",loading:function(){alert("loading")},success:function(){alert("success")},error:function(){alert("error")}},b);var a=window.XMLHttpRequest?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP");if(a===null||a===undefined){return}a.onreadystatechange=function(){try{if(a.readyState==4&&!b.successDone){b.success.call(window,a.responseText);b.successDone=true}if(a.status!=200&&!b.errorDone){b.error.call(window,a.responseText);b.successDone=true;b.errorDone=true}}catch(c){}};b.loading();a.open("GET",b.url,true);a.send(null)}});$hort.extend($hort.fn,{on:function(f,d){f=f.split(" ");for(var a=0;a<f.length;a++){var c=f[a].split(".");for(var b=0;b<this.length;b++){var e=this[b];e["$hortEvent"]=e["$hortEvent"]||[];e["$hortEvent"][c[0]]=e["$hortEvent"][c[0]]||[];if(c.length==1){e["$hortEvent"][c[0]].push(d)}else{if(c.length==2){e["$hortEvent"][c[0]][c[1]]=d}}if(e.addEventListener){e.addEventListener(c[0],d,false)}else{if(e.attachEvent){e.attachEvent("on"+c[0],function(g){d.call(e,g)})}}}}return this},un:function(e,f){e=e.split(" ");for(var b=0;b<e.length;b++){var g=e[b].split(".");for(var d=0;d<this.length;d++){var c=this[d];c["$hortEvent"]=c["$hortEvent"]||{};c["$hortEvent"][g[0]]=c["$hortEvent"][g[0]]||{};var k=c["$hortEvent"][g[0]];var h=c.removeEventListener?"removeEventListener":"detachEvent";if(g.length>1){c[h](g[0],k[g[1]],false);delete c["$hortEvent"][g[0]][g[1]]}else{for(var a in k){c[h](g[0],k[a],false)}c["$hortEvent"][g[0]]=[]}}}return this},trigger:function(c){for(var a=0;a<this.length;a++){if(this[0]["$hortEvent"]&&this[0]["$hortEvent"][c]){var b=this[0]["$hortEvent"][c];for(var d in b){b[d].call(this[0])}}}return this}});$hort.extend($hort.fn,{bind:$hort.fn.on,unbind:$hort.fn.un});$hort.extend($hort.fn,{css:function(b,a){if(b&&a){return this.setStyle(b,a)}if($hort.isObject(b)){for(var c in b){this.setStyle(c,b[c])}}else{this.getStyle(b)}return this},setStyle:function(c,b){if(c=="opacity"){for(var a=0;a<this.length;a++){if($hort.isIE){this[a].style.filter=(parseFloat(b)==1)?"":"alpha(opacity="+b*100+")"}this[a].style.opacity=b}return this}if(c=="float"){c=$hort.isIE?"styleFloat":"cssFloat"}else{c=$hort.camelCase(c)}if($hort.isString(b)||$hort.isNumber(b)){for(var a=0;a<this.length;a++){this[a].style[c]=b}}return this},getStyle:function(d){if(!this.length){return null}(d=="float")?d=$hort.isIE?"styleFloat":"cssFloat":d=$hort.camelCase(d);if(this[0].currentStyle){return this[0].currentStyle[d]}var c=document.defaultView.getComputedStyle(this[0],null)[d],a=String(c).match(/rgba?\([\d\s,]+\)/);if(a){var b=a[0].match(/\d{1,3}/g);c=$hort.rgbToHex(b)}return c},dimension:function(a){if(!this.length){return null}if(this[0]===window||this[0]===document||this[0]===document.documentElement){return this[0]["inner"+a]||window["inner"+a]||document.documentElement["client"+a]||document.body["client"+a]}return this[0]["client"+a]},width:function(){return this.dimension("Width")},height:function(){return this.dimension("Height")}});$hort.extend($hort,{viewport:function(){var b=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,a=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,d=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,c=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;return{top:c,left:d,right:d+a,bottom:c+b}}});